{
	"script": [
		"double*(minSample = world_traits.`bigglobe:lake_y`, maxSample = minSample)",
		"for (int angleIndex in range[0, 16):",
			"double angle = angleIndex * (tau / 16.0L)",
			"int sampleX = floorInt(originX + fastCos(angle) * RADIUS)",
			"int sampleZ = floorInt(originZ + fastSin(angle) * RADIUS)",
			"double sampleY = world_traits.`bigglobe:lake_y`(sampleX, sampleZ)",
			"if (world_traits.`bigglobe:biome`(sampleX, int(sampleY), sampleZ) ==. 'bigglobe:river': return())",
			"minSample = min(minSample, sampleY)",
			"maxSample = max(maxSample, sampleY)",
		")",
		"double depth = RADIUS * DEPTH + 4.0L",
		"if (maxSample - minSample !< RADIUS * 0.25L || minSample - depth !> world_traits.`bigglobe:sea_level`(originX, originZ) + 8: return())",
		"pieces.add(",
			"ScriptStructurePiece.new(",
				"originX - RADIUS,",
				"floorInt(minSample - depth),",
				"originZ - RADIUS,",
				"originX + RADIUS,",
				"ceilInt(maxSample) + 64,",
				"originZ + RADIUS,",
				"'bigglobe:lake',",
				"DATA.$=topY(ceilInt(minSample))",
			")",
		")"
	],
	"inputs": [
		{ "name": "RADIUS", "type": "int" },
		{ "name": "DEPTH",  "type": "double" },
		{ "name": "DATA",   "type": "NbtCompound" }
	]
}