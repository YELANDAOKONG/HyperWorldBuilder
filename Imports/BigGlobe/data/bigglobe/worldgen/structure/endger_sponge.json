{
	"type": "bigglobe:script",
	"biomes": "#bigglobe:has_structure/endger_sponge",
	"spawn_overrides": {},
	"step": "raw_generation",
	"max_radius_in_chunks": 16,
	"layout": [
		"int*(",
			"size        = random.nextInt(4, 6)",
			"innerType   = random.nextInt(4)",
			"outerType   = random.nextInt(4)",
			"outerRadius = 3 ^ size",
			"innerRadius = outerRadius >> 1",
		")",
		"int originY = floorInt(`bigglobe:end/mountain_center`(originX, originZ))",
		"void addPiece(int*(x, y, z), boolean outer:",
			"int maybeClamp(int*(min, max, value):",
				"outer ? clamp(min, max, value) : value",
			")",
			"pieces.add(",
				"ScriptStructurePiece.new(",
					"maybeClamp(originX - outerRadius, originX + outerRadius, x - innerRadius),",
					"maybeClamp(originY - outerRadius, originY + outerRadius, y - innerRadius),",
					"maybeClamp(originZ - outerRadius, originZ + outerRadius, z - innerRadius),",
					"maybeClamp(originX - outerRadius, originX + outerRadius, x + innerRadius),",
					"maybeClamp(originY - outerRadius, originY + outerRadius, y + innerRadius),",
					"maybeClamp(originZ - outerRadius, originZ + outerRadius, z + innerRadius),",
					"'bigglobe:endger_sponge',",
					"nbtCompound(",
						"x: x,",
						"y: y,",
						"z: z,",
						"scale: size.as(byte),",
						"type: (outer ? outerType : innerType).as(byte),",
						"state: 'minecraft:polished_deepslate'",
					")",
				")",
			")",
		")",
		"addPiece(originX,               originY,               originZ,               false)",
		"addPiece(originX + outerRadius, originY,               originZ,               true )",
		"addPiece(originX - outerRadius, originY,               originZ,               true )",
		"addPiece(originX,               originY + outerRadius, originZ,               true )",
		"addPiece(originX,               originY - outerRadius, originZ,               true )",
		"addPiece(originX,               originY,               originZ + outerRadius, true )",
		"addPiece(originX,               originY,               originZ - outerRadius, true )"
	]
}