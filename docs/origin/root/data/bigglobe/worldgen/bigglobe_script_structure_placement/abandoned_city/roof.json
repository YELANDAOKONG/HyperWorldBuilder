{
	"raw_placement": [
		"int adj = data.adj",
		"int flag(int*(x, z):",
			"1 << ((z + 1) * 3 + (x + 1))",
		")",
		"boolean has(int*(x, z):",
			"adj & flag(x, z) != 0",
		")",
		"for (int*(z, x) in range[-2, 2]:",
			"if (x.isBetween[-1, 1] && z.isBetween[-1, 1]:",
				"setBlockState(x, 0, z,",
					"world_traits.`bigglobe:automatic_surface_states`(x, 0, z).surfaceState",
				")",
			")",
			"else (",
				"int*(x2 = x - sign(x), z2 = z - sign(z))",
				"setBlockState(x, 0, z,",
					"switch (",
						"int clip(int value: value < -2 ? -1 : value > 2 ? 1 : 0)",
						"int(x2 == 0 || z2 == 0 && has(x2, z2)) << 4 |",
						"int(has(clip(x + 1), clip(z + 1))) << 3 |",
						"int(has(clip(x - 1), clip(z + 1))) << 2 |",
						"int(has(clip(x + 1), clip(z - 1))) << 1 |",
						"int(has(clip(x - 1), clip(z - 1)))",
					":",
						"default ('minecraft:grass_block[snowy=false]')",
						"case (2x0001: 'minecraft:cobblestone_stairs[facing=north,half=bottom,shape=outer_left,waterlogged=false]')",
						"case (2x0010: 'minecraft:cobblestone_stairs[facing=east,half=bottom,shape=outer_left,waterlogged=false]')",
						"case (2x0011: 'minecraft:cobblestone_stairs[facing=north,half=bottom,shape=straight,waterlogged=false]')",
						"case (2x0100: 'minecraft:cobblestone_stairs[facing=west,half=bottom,shape=outer_left,waterlogged=false]')",
						"case (2x0101: 'minecraft:cobblestone_stairs[facing=west,half=bottom,shape=straight,waterlogged=false]')",
						"case (2x0110: 'minecraft:cobblestone')",
						"case (2x0111: 'minecraft:cobblestone_stairs[facing=north,half=bottom,shape=inner_left,waterlogged=false]')",
						"case (2x1000: 'minecraft:cobblestone_stairs[facing=south,half=bottom,shape=outer_left,waterlogged=false]')",
						"case (2x1001: 'minecraft:cobblestone')",
						"case (2x1010: 'minecraft:cobblestone_stairs[facing=east,half=bottom,shape=straight,waterlogged=false]')",
						"case (2x1011: 'minecraft:cobblestone_stairs[facing=east,half=bottom,shape=inner_left,waterlogged=false]')",
						"case (2x1100: 'minecraft:cobblestone_stairs[facing=south,half=bottom,shape=straight,waterlogged=false]')",
						"case (2x1101: 'minecraft:cobblestone_stairs[facing=west,half=bottom,shape=inner_left,waterlogged=false]')",
						"case (2x1110: 'minecraft:cobblestone_stairs[facing=south,half=bottom,shape=inner_left,waterlogged=false]')",
					")",
				")",
			")",
		")"
	],
	"placement": [
		"for (int*(z, x) in range[-2, 2]:",
			"if (getBlockState(x, 0, z).isIn('#minecraft:dirt') && getBlockState(x, 1, z).isAir():",
				"random.if (",
					"random.if (",
						"random.if (",
							"random.if (",
								"ConfiguredFeature tree = WoodPalette(data.palette.asString()).features.get('natural_surface')",
								"if (tree != null: placeFeature(x, 1, z, tree))",
							")",
							"else (",
								"placeBlockState(x, 1, z, random.if (0.25I: 'minecraft:large_fern[half=lower]') else ('minecraft:tall_grass[half=lower]'))",
							")",
						")",
						"else (",
							"setBlockState(x, 1, z, random.if (0.25I: 'minecraft:fern') else ('minecraft:grass'))",
						")",
					")",
					"else (",
						"setBlockState(x, 1, z, 'bigglobe:short_grass')",
					")",
				")",
				"else random.if (world_traits.`bigglobe:snow_chance`(x, z):",
					"setBlockStateReplaceable(x, 1, z, 'minecraft:snow[layers=1]')",
				")",
			")",
		")"
	]
}