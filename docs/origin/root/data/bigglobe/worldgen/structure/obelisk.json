{
	"type": "bigglobe:script",
	"biomes": "#bigglobe:has_structure/obelisk",
	"spawn_overrides": {
		"ambient":                    { "bounding_box": "full", "spawns": [] },
		"axolotls":                   { "bounding_box": "full", "spawns": [] },
		"creature":                   { "bounding_box": "full", "spawns": [] },
		"misc":                       { "bounding_box": "full", "spawns": [] },
		"monster":                    { "bounding_box": "full", "spawns": [] },
		"underground_water_creature": { "bounding_box": "full", "spawns": [] },
		"water_ambient":              { "bounding_box": "full", "spawns": [] },
		"water_creature":             { "bounding_box": "full", "spawns": [] }
	},
	"step": "raw_generation",
	"max_radius_in_chunks": 16,
	"layout": [
		"double radius = 128.0L",
		"double height = radius * random.nextDouble(4.0L, 6.0L)",
		"int sideCount = 6",
		"NbtList sidePositions = nbtList()",
		"double angleOffset = random.nextDouble(tau / sideCount)",
		"int*(minTerrainY = 16x7FFF_FFFFU, maxTerrainY = 16x8000_0000U)",
		"for (int sideIndex in range[0, sideCount):",
			"double angle = random.nextDouble(tau / sideCount) + sideIndex * (tau / sideCount) + angleOffset",
			"double x = cos(angle) * radius",
			"double z = sin(angle) * radius",
			"sidePositions.add(nbtCompound(x: float(x), z: float(z)))",
			"int terrainY = world_traits.`bigglobe:y_level_on_surface`(originX + int(x), originZ + int(z))",
			"minTerrainY = min(minTerrainY, terrainY)",
			"maxTerrainY = max(maxTerrainY, terrainY)",
		")",
		"if (maxTerrainY + ceilInt(height) >= world_traits.`bigglobe:max_y`: return())",
		"int iRadius = ceilInt(radius * 2.0L)",
		"pieces.add(",
			"ScriptStructurePiece.new(",
				"originX - iRadius,",
				"minTerrainY,",
				"originZ - iRadius,",
				"originX + iRadius,",
				"maxTerrainY + ceilInt(height),",
				"originZ + iRadius,",
				"'bigglobe:obelisk',",
				"nbtCompound(",
					"startY: maxTerrainY + int(radius * 0.25L),",
					"mode: random.nextInt(3),",
					"sides: sidePositions,",
					"filler: 'minecraft:deepslate[axis=y]',",
					"accent: 'bigglobe:ancient_automata[state=0]'",
				")",
			")",
		")"
	]
}